<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Imperium Britannica Colonization Tracker</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      background-color: #0b0d17;
      color: #e0e0e0;
      margin: 0;
      padding: 0;
    }
    header {
      background-color: #1a1c2c;
      padding: 20px;
      text-align: center;
    }
    h1 {
      margin: 0;
      color: #f5c542;
    }
    .tabs {
      display: flex;
      justify-content: center;
      background-color: #12131a;
    }
    .tabs button {
      background: none;
      border: none;
      padding: 14px 20px;
      color: #ccc;
      cursor: pointer;
      font-size: 16px;
    }
    .tabs button.active {
      border-bottom: 2px solid #f5c542;
      color: #f5c542;
    }
    .tab-content {
      display: none;
      padding: 20px;
    }
    .tab-content.active {
      display: block;
    }
    .system, .carrier-box {
      background: #1a1c2c;
      border: 1px solid #2c2f3c;
      border-radius: 8px;
      margin: 10px 0;
      padding: 15px;
    }
    .status-completed { color: #66ff66; }
    .status-inprogress { color: #ffa500; }
    .status-upcoming { color: #9999ff; }
    .station-info {
      font-size: 14px;
      margin-top: 10px;
    }
    table {
      width: 100%;
      border-collapse: collapse;
      margin-top: 10px;
    }
    th, td {
      border: 1px solid #444;
      padding: 5px;
      text-align: left;
    }
    th {
      background-color: #2c2f3c;
    }
  </style>
</head>
<body>
  <header>
    <h1>Imperium Britannica Colonization Tracker</h1>
  </header>

  <div class="tabs">
    <button class="tablink active" onclick="showTab('route')">Colony Route</button>
    <button class="tablink" onclick="showTab('carriers')">Fleet Carriers</button>
    <button class="tablink" onclick="showTab('markets')">Markets</button>
  </div>

  <div id="route" class="tab-content active">
    <h2>Colonization Route</h2>
    <div id="colonization-list"></div>
  </div>

  <div id="carriers" class="tab-content">
    <h2>Fleet Carriers</h2>
    <div id="carrier-info"></div>
  </div>

  <div id="markets" class="tab-content">
    <h2>Market Overview â€“ Cauani</h2>
    <button onclick="loadMarketData('Cauani')">Refresh Market Data</button>
    <div id="market-info">
      <p>Loading market data...</p>
    </div>
  </div>

  <script>
    const colonizationData = [...]; // same as before

    function showTab(tabId) {
      document.querySelectorAll('.tab-content').forEach(el => el.classList.remove('active'));
      document.querySelectorAll('.tablink').forEach(btn => btn.classList.remove('active'));
      document.getElementById(tabId).classList.add('active');
      event.currentTarget.classList.add('active');
    }

    const container = document.getElementById("colonization-list");
    function createSystemDiv(system) {
      const div = document.createElement("div");
      div.className = "system";
      const statusClass = system.status === "Completed" ? "status-completed" :
                          system.status === "In Progress" ? "status-inprogress" : "status-upcoming";
      div.innerHTML = `<h3 class="${statusClass}">${system.name}</h3>
        <p>Status: ${system.status}</p>
        <p>Distance Remaining: ${system.remaining.toFixed(1)} LY</p>
        <button onclick="getStations('${system.name}', this)">View Stations</button>
        <div class="station-info" id="stations-${system.name.replace(/\s+/g, '_')}"> </div>`;
      return div;
    }
    colonizationData.forEach(system => {
      container.appendChild(createSystemDiv(system));
    });

    function getStations(systemName, button) { ... } // same as before

    function loadMarketData(systemName) { ... } // same as before

    loadMarketData("Cauani");

    const carriers = [
      { tag: "V0X-02M", name: "IMBR Pixelated Pioneer" },
      { tag: "WHZ-W7T", name: "IMBR Voxel Voyager" },
      { tag: "J8F-5HM", name: "IMBR Clear Skies" },
      { tag: "TFK-21W", name: "IMBR Lilith's Hex" }
    ];

    function loadCarriers() {
      const container = document.getElementById("carrier-info");
      container.innerHTML = "";
      carriers.forEach(carrier => {
        fetch(`${carrier.tag.toLowerCase()}.json`)
          .then(res => res.json())
          .then(data => {
            const div = document.createElement("div");
            div.className = "carrier-box";
            div.innerHTML = `
              <h3>${carrier.name}</h3>
              <p><strong>System:</strong> ${data.system}</p>
              <p><strong>Last Updated:</strong> ${new Date(data.lastUpdated).toLocaleString()}</p>
              <h4>Market</h4>
              <table>
                <tr><th>Commodity</th><th>Stock</th><th>Buy</th><th>Sell</th></tr>
                ${data.commodities.map(item => `
                  <tr>
                    <td>${item.name}</td>
                    <td>${item.stock}</td>
                    <td>${item.buyPrice}</td>
                    <td>${item.sellPrice}</td>
                  </tr>`).join("")}
              </table>
            `;
            container.appendChild(div);
          })
          .catch(() => {
            const div = document.createElement("div");
            div.className = "carrier-box";
            div.innerHTML = `<h3>${carrier.name}</h3><p>Failed to load data.</p>`;
            container.appendChild(div);
          });
      });
    }

    loadCarriers();
  </script>
</body>
</html>
